import { useParams, Link } from "react-router-dom"
import { useTranslation } from "react-i18next"
import { useEmailVerification } from "../lib/hooks/useEmailVerification"

function VerifyEmail() {
  const { t } = useTranslation()
  const { lang, token } = useParams()

  const status = useEmailVerification(token)

  return (
    <main className="hero bg-base-100 min-h-screen pb-20">
      <div className="hero-content text-center">
        <div className="flex max-w-md flex-col items-center justify-center">
          <h1 className="mb-5 text-4xl font-bold">{t("verifyEmailPage.title")}</h1>
          {status === "pending" && (
            <>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth="1.5"
                stroke="currentColor"
                className="mb-4 size-24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"
                />
              </svg>
              <p>{t("verifyEmailPage.checkEmail")}</p>
            </>
          )}
          {status === "verified" && (
            <>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth="1.5"
                stroke="currentColor"
                className="mb-4 size-24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  d="M21.75 9v.906a2.25 2.25 0 0 1-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 0 0 1.183 1.981l6.478 3.488m8.839 2.51-4.66-2.51m0 0-1.023-.55a2.25 2.25 0 0 0-2.134 0l-1.022.55m0 0-4.661 2.51m16.5 1.615a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V8.844a2.25 2.25 0 0 1 1.183-1.981l7.5-4.039a2.25 2.25 0 0 1 2.134 0l7.5 4.039a2.25 2.25 0 0 1 1.183 1.98V19.5Z"
                />
              </svg>
              <p>{t("verifyEmailPage.verifiedSuccess")}</p>
              <p>{t("verifyEmailPage.signInPrompt")}</p>
              <Link to={`/${lang}/sign-in`} className="link-hover link mt-4">
                {t("verifyEmailPage.signIn")}
              </Link>
            </>
          )}
          {status === "already_verified" && (
            <>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth="1.5"
                stroke="currentColor"
                className="mb-4 size-24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  d="M21.75 9v.906a2.25 2.25 0 0 1-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 0 0 1.183 1.981l6.478 3.488m8.839 2.51-4.66-2.51m0 0-1.023-.55a2.25 2.25 0 0 0-2.134 0l-1.022.55m0 0-4.661 2.51m16.5 1.615a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V8.844a2.25 2.25 0 0 1 1.183-1.981l7.5-4.039a2.25 2.25 0 0 1 2.134 0l7.5 4.039a2.25 2.25 0 0 1 1.183 1.98V19.5Z"
                />
              </svg>
              <p>{t("verifyNewEmailPage.alreadyVerified")}</p>
              <Link to={`/${lang}/sign-in`} className="link-hover link mt-4">
                {t("verifyEmailPage.signIn")}
              </Link>
            </>
          )}
          {status === "error" && (
            <>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth="1.5"
                stroke="currentColor"
                className="mb-4 size-24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"
                />
              </svg>

              <p>{t("verifyEmailPage.verificationFailed")}</p>
              <p>{t("verifyEmailPage.retrySignUp")}</p>
              <Link to={`/${lang}/sign-up`} className="link-hover link mt-4">
                {t("verifyEmailPage.signUp")}
              </Link>
            </>
          )}
        </div>
      </div>
    </main>
  )
}

export default VerifyEmail
